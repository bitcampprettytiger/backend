<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Business Registration</title>
</head>
<body>
<h1>사업자 번호 조회하기</h1>
<!-- 입력 필드 -->
<input type="text" id="reg1" />
<input type="text" id="reg2" />
<input type="text" id="reg3" />

<!-- 버튼 -->
<button id="submit-btn">확인</button>

<!-- 결과 표시 -->
<div id="bs_result"></div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
<script>
  $(document).ready(function() {
    // 확인 버튼 클릭 시
    $('#submit-btn').click(function() {
      let reg1 = $("#reg1").val();
      let reg2 = $("#reg2").val();
      let reg3 = $("#reg3").val();

      var bs_num = reg1 + "" + reg2 + "" + reg3;

      if (bs_num.length === 10) {
        // 백엔드에 사업자 번호 전송
        $.ajax({
          url: "/check-business",
          type: "POST",
          contentType: "application/json",
          data: JSON.stringify({ "b_no": [bs_num] }),
          success: function(result) {
            // 백엔드로부터 결과를 받아와서 처리
            if (result === "등록되지 않은 사업자번호입니다.") {
              $("#bs_result").text("등록되지 않은 사업자번호입니다.");
              $("#bs_result").css("color", "red");
            } else if (result === "휴/폐업한 사업자번호입니다.") {
              $("#bs_result").text("휴/폐업한 사업자번호입니다.");
              $("#bs_result").css("color", "red");
            } else if (result === "정상적인 사업자번호입니다.") {
              $("#bs_result").text("정상적인 사업자번호입니다.");
              $("#bs_result").css("color", "green");
            } else {
              $("#bs_result").text("사업자번호 검증에 실패했습니다.");
              $("#bs_result").css("color", "red");
            }
          },
          error: function() {
            $("#bs_result").text("사업자번호 검증에 실패했습니다.");
            $("#bs_result").css("color", "red");
          }
        });
      }
    });
  });

</script>
</body>
</html>